(this["webpackJsonpblocklist-ui"]=this["webpackJsonpblocklist-ui"]||[]).push([[0],{31:function(e,t,n){e.exports=n(53)},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(29),o=n.n(c),s=(n(36),n(37),n(38),function(){return r.a.createElement("h1",{className:"component-header"},r.a.createElement("a",{href:"https://www.github.developerdan.com/"},r.a.createElement("img",{className:"avatar",src:"/lightswitch05.png",alt:"lightswitch05 avatar"})),"Blocklist Tools: ",r.a.createElement("small",null,r.a.createElement("a",{href:"https://github.com/blocklist-tools"},"Source on Github")))}),l=(n(39),function(){return r.a.createElement("footer",{className:"component-footer"},"Copyright \xa9 2020 Daniel White")}),i=n(4),u=(n(40),function(e){var t=Object(a.useState)(e.value),n=Object(i.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){o(e.value)}),[e.value]);var s=Object(a.useRef)(null);return r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=c;try{n=new URL(n).hostname}catch(a){}e.onSubmit(n)},className:"component-entry-search"},r.a.createElement("label",{hidden:!0,htmlFor:"entry-search-input"},"URL Search"),r.a.createElement("input",{autoFocus:!0,ref:s,id:"entry-search-input",title:"Search for domain name or URL",type:"text",spellCheck:"false",autoCapitalize:"false",autoCorrect:"false",autoComplete:"false",autoSave:"false",name:"urlSearch",placeholder:"Domain or URL",value:c,onChange:function(e){o(e.target.value.trim().toLowerCase())}}),r.a.createElement("button",{type:"button",title:"Clear form",onClick:function(){var t;o(""),e.onSubmit(""),null===s||void 0===s||null===(t=s.current)||void 0===t||t.focus()}},"\u232b"),r.a.createElement("button",{type:"submit"},"\ud83d\udd0d"))});n(41);function f(e,t){var n="",a=null;return e&&(n=e.toDateString(),a=e.toISOString()),t&&(n=t),a=a||n,r.a.createElement("span",{title:a},n)}function m(e){var t=null;e.removedOn||(t="Current Version");var n=null;return e.addedOn.toISOString()===e.listAddedOn.toISOString()&&(n="Initial Version"),r.a.createElement("div",null,function(e){var t=null!==e.removedVersionId,n=["included-icon",t?"is-removed":"is-included"].join(" "),a=t?"\ud83d\udeab":"\u2714";return r.a.createElement("span",{className:n},a)}(e),r.a.createElement("a",{href:"/versions/".concat(e.addedVersionId,"/diff")},f(e.addedOn,n)),"-",r.a.createElement("a",{href:"/versions/".concat(e.removedVersionId,"/diff")},f(e.removedOn,t)))}var d=function(e){if(!e.entrySearchResponse)return null;var t;if(0===e.entrySearchResponse.summaries.length)t=r.a.createElement("div",null,"No known list contains ",e.entrySearchResponse.query);else{var n=e.entrySearchResponse.summaries.map((function(e){return r.a.createElement("li",{key:e.addedVersionId},r.a.createElement("div",{className:"blocklist-name"},e.blocklistName),m(e))}));t=r.a.createElement("div",null,r.a.createElement("p",null,"Blocklists that contain a matching entry, including the date it was first added, and optionally removed."),r.a.createElement("ul",null,n))}return r.a.createElement("section",{className:"component-display-entry-search-response basic-section"},r.a.createElement("h2",null,"Lists containing ",e.entrySearchResponse.query),t)},h=function(e){return e.dnsQuery?r.a.createElement("section",{className:"component-display-dns-query basic-section"},r.a.createElement("h2",null,"DNS Query",r.a.createElement("label",{hidden:!0,htmlFor:"dns-query-select"},"Query Type"),r.a.createElement("select",{id:"dns-query-select",value:e.dnsQuery.queryType,onChange:function(t){e.onQueryTypeChange(t.target.value)}},r.a.createElement("option",null,"A"),r.a.createElement("option",null,"AAAA"),r.a.createElement("option",null,"CAA"),r.a.createElement("option",null,"CNAME"),r.a.createElement("option",null,"MX"),r.a.createElement("option",null,"NS"),r.a.createElement("option",null,"PTR"),r.a.createElement("option",null,"SOA"),r.a.createElement("option",null,"SRV"),r.a.createElement("option",null,"TXT"))),r.a.createElement("code",null,r.a.createElement("pre",null,e.dnsQuery.response))):null},p=n(14),v=n(15),b=n(19),E=n(21),y=n(22),k=function(e){Object(b.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e.message)).name="ApiError",a.stack=e.stack,a}return Object(v.a)(n,null,[{key:"fromMessage",value:function(e){return new n(new Error(e))}}]),n}(Object(y.a)(Error)),g=n(5),O=n.n(g),j=n(10),w=function(e){Object(b.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,null)).message=void 0,a.message=e,a}return Object(v.a)(n,[{key:"status",get:function(){return 0}},{key:"statusText",get:function(){return this.message}}],[{key:"fromError",value:function(e){return new n(e.message)}}]),n}(Object(y.a)(Response)),S=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"safeFetch",value:function(){var e=Object(j.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",w.fromError(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"dnsQuery",value:function(){var e=Object(j.a)(O.a.mark((function e(t,n){var a,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new URLSearchParams).append("name",t),a.append("type",n),e.next=5,this.safeFetch("".concat(this.rootApiUrl,"/dns-query?").concat(a),{headers:this.defaultHeaders(),mode:"cors",method:"GET"});case 5:if(200===(r=e.sent).status){e.next=14;break}return e.t0="DNS query failed: ".concat(r.status," => "),e.next=10,r.text();case 10:return e.t1=e.sent,c=e.t0.concat.call(e.t0,e.t1),console.log(c),e.abrupt("return",k.fromMessage(c));case 14:return e.next=16,r.json();case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"entrySearch",value:function(){var e=Object(j.a)(O.a.mark((function e(t){var n,a,r,c,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("q",t),e.next=4,this.safeFetch("".concat(this.rootApiUrl,"/entries/search?").concat(n),{headers:this.defaultHeaders(),mode:"cors",method:"GET"});case 4:if(200===(a=e.sent).status){e.next=13;break}return e.t0="Entry search failed: ".concat(a.status," => "),e.next=9,a.text();case 9:return e.t1=e.sent,r=e.t0.concat.call(e.t0,e.t1),console.log(r),e.abrupt("return",k.fromMessage(r));case 13:return e.next=15,a.json();case 15:return c=e.sent,o=c.summaries.map((function(e){var t=e.removedOn;return e.removedOn&&(t=new Date(e.removedOn)),{blocklistName:e.blocklistName,blocklistId:e.blocklistId,addedVersionId:e.addedVersionId,addedOn:new Date(e.addedOn),removedVersionId:e.removedVersionId,removedOn:t,listAddedOn:new Date(e.listAddedOn)}})),e.abrupt("return",{query:c.query,summaries:o});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"versionDiff",value:function(){var e=Object(j.a)(O.a.mark((function e(t,n){var a,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.safeFetch("".concat(this.rootApiUrl,"/versions/").concat(t,"/diff/").concat(n||""),{headers:this.defaultHeaders(),mode:"cors",method:"GET"});case 2:if(200===(a=e.sent).status){e.next=11;break}return e.t0="Version diff query failed: ".concat(a.status," => "),e.next=7,a.text();case 7:return e.t1=e.sent,r=e.t0.concat.call(e.t0,e.t1),console.log(r),e.abrupt("return",k.fromMessage(r));case 11:return e.next=13,a.text();case 13:return c=e.sent,e.abrupt("return",{firstVersion:t,secondVersion:n,lines:c.split(/\r?\n/)});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchLists",value:function(){var e=Object(j.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.safeFetch("".concat(this.rootApiUrl,"/blocklists?page=").concat(t),{headers:this.defaultHeaders(),mode:"cors",method:"GET"});case 2:if(200===(n=e.sent).status){e.next=11;break}return e.t0="Fetch lists failed: ".concat(n.status," => "),e.next=7,n.text();case 7:return e.t1=e.sent,a=e.t0.concat.call(e.t0,e.t1),console.log(a),e.abrupt("return",k.fromMessage(a));case 11:return e.next=13,n.json();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function x(e,t){var n=Object(a.useState)(null),r=Object(i.a)(n,2),c=r[0],o=r[1];function s(e){if(e instanceof k)return l();o(e)}function l(){o(null)}return Object(a.useEffect)((function(){var n;if(!e||!t)return l();c&&(null===(n=c.queryName)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()&&c.queryType===t||function(e,t){l(),S.dnsQuery(e,t).then(s)}(e,t)})),c}function N(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),r=n[0],c=n[1];function o(e){if(e instanceof k)return c(null);c(e)}function s(){c(null)}return Object(a.useEffect)((function(){var t,n;if(!e||0===e.length)return s();r&&(null===(t=r.query)||void 0===t?void 0:t.toLowerCase())===e.toLowerCase()||(n=e,s(),S.entrySearch(n).then(o))})),r}S.rootApiUrl="https://blocklist-tools-api.developerdan.com",S.defaultHeaders=function(){return{"Content-Type":"application/json"}};var C=n(2);var V=function(){var e=function(e,t){var n=Object(a.useState)(t),r=Object(i.a)(n,2),c=r[0],o=r[1],s=new URLSearchParams(Object(C.h)().search);return Object(a.useEffect)((function(){var n=s.get(e)||t;n!==c&&(console.log("setting query to ",n),o(n))}),[s,e,t,c]),c}("q",""),t=Object(a.useState)("A"),n=Object(i.a)(t,2),c=n[0],o=n[1],s=x(e,c),l=N(e),f=Object(C.g)();return r.a.createElement("div",null,r.a.createElement(u,{value:e,onSubmit:function(e){return function(e){var t="";e&&e.length>0&&(t="?q="+encodeURIComponent(e)),f.push("/entries/search"+t)}(e)}}),r.a.createElement(d,{entrySearchResponse:l}),r.a.createElement(h,{dnsQuery:s,onQueryTypeChange:function(e){o(e)}}))},A=n(9);function q(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(i.a)(c,2),s=o[0],l=o[1];function u(){return(u=Object(j.a)(O.a.mark((function e(){var t,n,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!1,a=0;case 3:if(n){e.next=15;break}return e.next=6,S.fetchLists(a);case 6:if(!((c=e.sent)instanceof k)){e.next=10;break}return r(!1),e.abrupt("return",l(null));case 10:t=t.concat(c),n=c.length<100;case 12:a++,e.next=3;break;case 15:l(t);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){n||(r(!0),function(){u.apply(this,arguments)}())})),s}var R=n(11),U=n(12),I=(n(50),function(e){if(!e.blocklists)return r.a.createElement("div",null);var t=e.blocklists.map((function(e){return r.a.createElement("section",{className:"blocklist-card",key:e.id},r.a.createElement("a",{className:"blocklist-name",href:e.homepageUrl,rel:"noopener noreferrer",target:"_blank"},e.name),r.a.createElement("ul",{className:"blocklist-table-details-list"},r.a.createElement("li",null,r.a.createElement("a",{href:e.homepageUrl,rel:"noopener noreferrer",target:"_blank"},r.a.createElement(R.a,{className:"fa-fw",icon:U.d}),"Homepage")),r.a.createElement("li",null,r.a.createElement("a",{href:e.downloadUrl,rel:"noopener noreferrer",target:"_blank"},r.a.createElement(R.a,{className:"fa-fw",icon:U.b}),"Download - ",e.format)),r.a.createElement("li",null,r.a.createElement("a",{href:e.issuesUrl,rel:"noopener noreferrer",target:"_blank"},r.a.createElement(R.a,{className:"fa-fw",icon:U.a}),"Issues")),r.a.createElement("li",null,r.a.createElement("a",{href:e.licenseUrl,rel:"noopener noreferrer",target:"_blank"},r.a.createElement(R.a,{className:"fa-fw",icon:U.c}),e.licenseType))))}));return r.a.createElement("section",{className:"component-blocklist-table"},t)}),D=function(){var e=q();return r.a.createElement(I,{blocklists:e})};function L(e,t){var n=Object(a.useState)(null),r=Object(i.a)(n,2),c=r[0],o=r[1];function s(e){if(e instanceof k)return o(null);o(e)}return Object(a.useEffect)((function(){e&&0!==e.length?c&&c.firstVersion===e&&c.secondVersion===t||function(e,t){S.versionDiff(e,t).then(s)}(e,t):o(null)})),c}n(51);var T=function(e){if(!e.versionDiff)return null;if(0===e.versionDiff.lines.length)return r.a.createElement("section",null,"Lists match!");var t=e.versionDiff.lines.map((function(e,t){if("---"===e)return r.a.createElement("div",{className:"line-break",key:t},"---");var n="existing-line";return e.startsWith("-")&&(n="removed-line"),e.startsWith("+")&&(n="added-line"),r.a.createElement("div",{key:t,className:n},e)}));return r.a.createElement("section",{className:"component-version-diff-response basic-section"},t)},F=function(){var e=Object(C.i)(),t=L(e.firstVersion,e.secondVersion);return r.a.createElement(T,{versionDiff:t})},Q=(n(52),function(){return r.a.createElement("nav",{className:"component-header-nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(A.b,{to:"/entries/search"},r.a.createElement(R.a,{icon:U.f})," Search")),r.a.createElement("li",null,r.a.createElement(A.b,{to:"/blocklists"},r.a.createElement(R.a,{icon:U.e})," Blocklists"))))});var M=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,null,r.a.createElement(Q,null),r.a.createElement(s,null),r.a.createElement("main",null,r.a.createElement(C.d,null,r.a.createElement(C.b,{path:"/blocklists",component:D}),r.a.createElement(C.b,{path:"/entries/search",component:V}),r.a.createElement(C.b,{path:["/versions/:firstVersion/diff/:secondVersion","/versions/:firstVersion/diff"],component:F}),r.a.createElement(C.b,null,r.a.createElement(C.a,{to:"/entries/search"}))))),r.a.createElement(l,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.c857298f.chunk.js.map